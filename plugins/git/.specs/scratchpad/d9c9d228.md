# Architecture Scratchpad: Convert Git Plugin Skills to Codex Format

Task: `convert-git-to-codex.md`
Created: 2026-02-16

## Candidate Architectures
1. Manual per-file rewrite only
- Pros: direct control
- Cons: inconsistency risk

2. Scripted bulk converter
- Pros: fast, repeatable
- Cons: higher upfront scripting effort

3. Hybrid deterministic pipeline (selected)
- Pros: balances control and repeatability
- Cons: still needs strict validation

## Selected Approach
Two-stage architecture:
1. Conversion stage
- Path mapping
- Frontmatter normalization
- Body rewrite rules
2. Validation stage
- Structural checks
- Forbidden token sweep
- Name/alias parity checks

## Key Decisions
- Prefix all output skills with `git-`.
- Use conservative lexical rewrites only.
- Enforce completion with deterministic regex checks.

## Risks
- Missing a token in one long file.
- Alias mismatch from manual naming.

## Mitigations
- Table-driven mapping.
- Final global scan before closure.
